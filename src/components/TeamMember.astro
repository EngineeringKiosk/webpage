---
import { Image } from "astro:assets";
import { resolveTeamMember } from '../scripts/team-members.js';

export interface Props {
	memberKey: string;
	avatar?: string;
	name?: string;
	github?: string;
	x?: string;
	linkedin?: string;
	bluesky?: string;
	mastodon?: string;
	threads?: string;
	instagram?: string;
	youtube?: string;
	website?: string;
	profileLink?: string;
}

const { memberKey, ...overrides } = Astro.props;
const { avatar, name, github, x, linkedin, bluesky, mastodon, threads, instagram, youtube, website, profileLink, badges = [] } = resolveTeamMember(memberKey, overrides);
const imageAvatar = (await import(`../images/teams/${avatar}.jpg`)).default
---

<div class="w-full sm:w-1/2 md:w-1/3 px-4 mb-10 hostpreview">
	<div class="h-full py-8 px-10 bg-white rounded-md text-center">
		{profileLink ? (
			<a href={profileLink}>
				<Image class="w-44 mx-auto mb-6 rounded-full" src={imageAvatar} alt={name} title={name} />
			</a>
		) : (
			<Image class="w-44 mx-auto mb-6 rounded-full" src={imageAvatar} alt={name} title={name} />
		)}

		{profileLink ? (
			<a href={profileLink}>
				<h2 class="mb-2 text-xl md:text-2xl lg:text-3xl leading-tight font-semibold">
					{name}
				</h2>
			</a>
		) : (
			<h2 class="mb-2 text-xl md:text-2xl lg:text-3xl leading-tight font-semibold">
				{name}
			</h2>
		)}

		{badges.length > 0 && (
			<div class="mb-4 flex flex-wrap justify-center gap-2">
				{badges.map((badge) => (
					<span class="inline-block py-px px-2 text-xs leading-5 text-yellow-500 bg-yellow-100 font-medium rounded-full">
						{badge}
					</span>
				))}
			</div>
		)}

		<div class="flex items-center justify-center">
			{github && (
				<a class="inline-block mr-6 hover:opacity-80" href={`https://github.com/${github}`}>
					<img src="/images/brands/github-gray.svg" alt={`${name} auf GitHub`} />
				</a>
			)}
			{x && (
				<a class="inline-block mr-6 hover:opacity-80" href={`https://x.com/${x}`}>
					<img src="/images/brands/x.svg" alt={`${name} auf X`} />
				</a>
			)}
			{bluesky && (
				<a class="inline-block mr-6 hover:opacity-80" href={bluesky}>
					<img src="/images/brands/bluesky-gray.svg" alt={`${name} auf Bluesky`} />
				</a>
			)}
			{mastodon && (
				<a class="inline-block mr-6 hover:opacity-80" href={mastodon}>
					<img src="/images/brands/mastodon-gray.svg" alt={`${name} auf Mastodon`} />
				</a>
			)}
			{threads && (
				<a class="inline-block mr-6 hover:opacity-80" href={threads}>
					<img src="/images/brands/threads.svg" alt={`${name} auf Threads`} class="h-5 grayscale opacity-60" />
				</a>
			)}
			{instagram && (
				<a class="inline-block mr-6 hover:opacity-80" href={instagram}>
					<img src="/images/brands/instagram.svg" alt={`${name} auf Instagram`} class="h-5 grayscale opacity-60" />
				</a>
			)}
			{linkedin && (
				<a class="inline-block mr-6 hover:opacity-80" href={`https://linkedin.com/in/${linkedin}`}>
					<img src="/images/brands/linkedin.svg" alt={`${name} auf LinkedIn`} />
				</a>
			)}
			{youtube && (
				<a class="inline-block mr-6 hover:opacity-80" href={youtube}>
					<img src="/images/brands/youtube.svg" alt={`${name} auf YouTube`} class="h-5 grayscale opacity-60" />
				</a>
			)}
			{website && (
				<a class="inline-block hover:opacity-80" href={website}>
					<img src="/images/elements/icon-website.svg" height="33" width="33" alt={`Website von ${name}`} />
				</a>
			)}
		</div>
	</div>
</div>
